# Terraform

## Prerequisites

### Install Terraform
This repo currently works with Terraform v0.12.29. The binaries for v0.12.29 can be found [here](https://releases.hashicorp.com/terraform/0.12.29/).


### AWS CLI and Credentials
Info on AWS CLI etc

### Terraform Backend State
Info on where Terrafom state is stored

## Terraform Commands
From the base `Terraform-Training` directory, run the following commands.

When running the following commands, be sure to pass in the correct config file from the 'configs' folder, i.e. -var-file=terraform/configs/dev/vars.tfvars.

### `terraform init`

This command initialises the current working directory.

`backend.tf` contains the configuration for the remote Terraform state in S3. 

```bash
terraform init -backend-config=terraform/configs/dev/backend.tf terraform/
```

### `terraform validate`

This command will validate any Terraform changes. Terraform plan does an implicit validate.

```bash
terraform validate terraform/
```

### `terraform plan`

This command creates an execution plan. The execution plan is used to check whether the proposed set of changes are as expected, without actually making any changes to the resources or the state file.

```bash
terraform plan -input=false -var-file=terraform/configs/dev/vars.tfvars terraform/
```

If you want to output the plan to a file, use the following command.
```bash
terraform plan -input=false -var-file=terraform/configs/dev/vars.tfvars terraform/ > tf-plan.txt
```

### `terraform apply`

The terraform apply command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan.

```bash
terraform apply -input=false -var-file=terraform/configs/dev/vars.tfvars terraform/
```
